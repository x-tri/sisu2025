{
  "name": "x-sisu-2026",
  "version": "1.0.0",
  "services": {
    "frontend": {
      "name": "sisu-frontend",
      "build": {
        "context": "./web",
        "dockerfile": "../deploy/frontend/Dockerfile"
      },
      "environment": [
        "NEXT_PUBLIC_SUPABASE_URL=${NEXT_PUBLIC_SUPABASE_URL}",
        "NEXT_PUBLIC_SUPABASE_ANON_KEY=${NEXT_PUBLIC_SUPABASE_ANON_KEY}"
      ],
      "ports": ["3000"],
      "healthcheck": {
        "test": ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:3000"],
        "interval": "30s",
        "timeout": "10s",
        "retries": 3
      }
    },
    "backend": {
      "name": "sisu-backend",
      "build": {
        "context": ".",
        "dockerfile": "./deploy/backend/Dockerfile"
      },
      "environment": [
        "SUPABASE_URL=${SUPABASE_URL}",
        "SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}",
        "SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}",
        "PYTHONUNBUFFERED=1"
      ],
      "ports": ["8000"],
      "healthcheck": {
        "test": ["CMD", "curl", "-f", "http://localhost:8000/health"],
        "interval": "30s",
        "timeout": "10s",
        "retries": 3
      }
    },
    "nginx": {
      "name": "sisu-nginx",
      "image": "nginx:alpine",
      "ports": ["8082:80"],
      "volumes": [
        "./deploy/nginx/nginx.conf:/etc/nginx/nginx.conf:ro"
      ],
      "depends_on": ["backend", "frontend"]
    }
  }
}
