# XTRI SISU 2026 - Docker Compose Override for Development
# Use this file for local development
# Usage: docker compose -f docker-compose.yml -f docker-compose.override.yml up

services:
  backend:
    volumes:
      # Mount source code for hot reload during development
      - ../src:/app/src:ro
      - ../scripts:/app/scripts:ro
    environment:
      - DEBUG=1
    command: >
      sh -c "pip install -r requirements.txt &&
             uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload"

  frontend:
    volumes:
      # Mount source code for hot reload during development
      - ../web:/app:cached
      - /app/node_modules
      - /app/.next
    environment:
      - NODE_ENV=development
    command: >
      sh -c "npm install && npm run dev"
    ports:
      # Expose Next.js dev port directly for HMR
      - "3000:3000"
